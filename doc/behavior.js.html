<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>behavior.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="StorageController.html">StorageController</a><ul class='methods'><li data-type='method'><a href="StorageController.html#.get">get</a></li><li data-type='method'><a href="StorageController.html#.put">put</a></li></ul></li><li><a href="User.html">User</a><ul class='methods'><li data-type='method'><a href="User.html#create">create</a></li><li data-type='method'><a href="User.html#validate">validate</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">behavior.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'

import { mapObjIndexed, filter, pipe, isEmpty } from 'ramda';

/**
* StorageController
*/
class StorageController {

	/**
	* Put data into localStorage
	* @param {Object} data - object with data
	*/
	static put (data) {
		localStorage.setItem('list', JSON.stringify(data));
	}

	/**
	* Get data from localStorage if exists
	* @return {Object}
	*/
	static get () {
		return 'list' in localStorage ? JSON.parse(localStorage.list) : [];
	}
}

/**
* Wrapper for user which doing validation and create user
*/
class User {

	/**
	* Constructor
	* @param {Object} $scope - Object of current controller scope
	*/
	constructor ($scope) {

		this.first = $scope.first;
		this.last = $scope.last;
		this.username = $scope.username;
	}

	/**
	* Validator
	* @return {Promise}
	*/
	validate () {

		let __validators = this.userValidators;

		let errors = pipe(
			mapObjIndexed((index, field, obj) => {

				let func = __validators[field];

				return !func(obj[field] || '');
			}
		), filter(n => n)
		)(this);

		return new Promise((resolve, reject) => {

			if(isEmpty(errors))
				resolve();
			else
				reject(errors);
		})
	}

	/**
	* validator for each user`s fields
	* @return {Object}
	*/
	get userValidators () {

		return {
			first: n => n !== '',
			last: n => n !== '',
			username: n => n.length >= 3
		}
	}

	/**
	* Create user
	* @param {Array} list - Link to array of users
	* @return {Promise}
	*/
	create (list) {

		return this.validate().then(() => {

			list.push(this);

			StorageController.put(list);
		})
	}
}

export {
	StorageController,
	User
};</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Mar 05 2017 20:09:22 GMT+0300 (MSK) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
